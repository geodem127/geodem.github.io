import{r as t,u as U,b as A,c as O,j as i,_ as F,d as Q,e as Y,f as V,s as q,B as v,a as C,T as _,S as J,D as K,U as X,P as M}from"./index-DitTNkQS.js";import{S as Z}from"./SectionWrapper-bhBZ_MxI.js";import{G,C as ee,u as ne}from"./useDataParse-CWaRbR3a.js";const ie=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],te={entering:{opacity:1},entered:{opacity:1}},re=t.forwardRef(function(s,P){const c=U(),h={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{addEndListener:o,appear:g=!0,children:p,easing:x,in:T,onEnter:d,onEntered:H,onEntering:D,onExit:E,onExited:u,onExiting:N,style:a,timeout:b=h,TransitionComponent:R=Q}=s,W=A(s,ie),m=t.useRef(null),j=O(m,p.ref,P),n=r=>l=>{if(r){const w=m.current;l===void 0?r(w):r(w,l)}},f=n(D),y=n((r,l)=>{Y(r);const w=V({style:a,timeout:b,easing:x},{mode:"enter"});r.style.webkitTransition=c.transitions.create("opacity",w),r.style.transition=c.transitions.create("opacity",w),d&&d(r,l)}),S=n(H),k=n(N),$=n(r=>{const l=V({style:a,timeout:b,easing:x},{mode:"exit"});r.style.webkitTransition=c.transitions.create("opacity",l),r.style.transition=c.transitions.create("opacity",l),E&&E(r)}),L=n(u),z=r=>{o&&o(m.current,r)};return i.jsx(R,F({appear:g,in:T,nodeRef:m,onEnter:y,onEntered:S,onEntering:f,onExit:$,onExited:L,onExiting:k,addEndListener:z,timeout:b},W,{children:(r,l)=>t.cloneElement(p,F({style:F({opacity:0,visibility:r==="exited"&&!T?"hidden":void 0},te[r],a,p.props.style),ref:j},l))}))}),oe=re,se=e=>{const[s,P]=t.useState(null),[c,h]=t.useState(null),[o,g]=t.useState(null),[p,x]=t.useState(null),[T,d]=t.useState(null),[H,D]=t.useState(null),[E,u]=t.useState(null),[N,a]=t.useState(null),[b,R]=t.useState(null),[W,m]=t.useState(null),j=()=>{if(e){const n=e.getBoundingClientRect(),f=window.innerWidth,y=window.innerHeight;if(!n)return;const S=(n==null?void 0:n.top)/y*100,k=100-(n==null?void 0:n.bottom)/y*100,$=(n==null?void 0:n.left)/f*100,L=100-(n==null?void 0:n.right)/f*100;P(S),h(k),g($),x(L),d(n==null?void 0:n.height),D(n==null?void 0:n.width),u(),m(n),a(f),R(y)}};return t.useEffect(()=>{if(e)return j(),window.addEventListener("scroll",j),()=>{window.removeEventListener("scroll",j)}},[e]),{top:s,bottom:c,left:o,right:p,height:T,width:H,view:E,rects:W,viewportWidth:N,viewportHeight:b}},le=q(v)(({theme:e})=>({background:"transparent",border:0,boxShadow:"none",overflow:"visible",position:"relative",cursor:"pointer",padding:"0","& .periodLabel":{width:"0px",height:"0px",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative",zIndex:"200",boxShadow:`0px 0px 50px 15px ${e.palette.primary.main}`,WebkitBoxShadow:`0px 0px 50px 15px ${e.palette.primary.main}`,MozBoxShadow:`0px 0px 50px 15px ${e.palette.primary.main}`},"& .periodLine":{width:"3px",height:0,position:"absolute",left:"50%",zIndex:"0",background:`linear-gradient(180deg, ${e==null?void 0:e.palette.primary.dark} 0%, ${e==null?void 0:e.palette.primary.main} 50%, ${e==null?void 0:e.palette.primary.light} 100%)`,opacity:.5,overflow:"hidden",transition:"height 400ms linear","&::before":{content:'""',position:"absolute",left:"-.35rem",top:"-1rem",width:"1rem",height:"0",transition:"height 200ms linear",background:`linear-gradient(180deg, ${e==null?void 0:e.palette.primary.dark} 0%, ${e==null?void 0:e.palette.primary.main} 50%, ${e==null?void 0:e.palette.primary.light} 100%)`,clipPath:"polygon(50% 100%, 100% 75%, 100% 25%, 50.75% 0%, 50% 19.37%, 82.95% 33.68%, 82.95% 66.48%, 50% 81.23%, 17.05% 66.48%, 17.37% 33.68%, 50% 19.37%, 50.75% 0%, 0% 25%, 0% 75%)"}},"&.inRange":{"& .periodLine":{overflow:"visible",height:"100%","&::before":{height:"1rem"}},"&:last-child .periodLine":{height:"calc(100% - 5rem)"},"&:not(:has(+ .inRange))":{"& .periodLine":{clipPath:"polygon(400% -3rem, 100% 50%, 50% 100%, 0% 50%, -400% -3rem)"}}},"&.isMobile":{paddingLeft:"2rem","&::before":{content:'""',position:"absolute",left:"0",top:"1.15rem",width:"1rem",height:"1rem",transition:"height 200ms linear",background:`linear-gradient(180deg, ${e==null?void 0:e.palette.primary.dark} 0%, ${e==null?void 0:e.palette.primary.main} 50%, ${e==null?void 0:e.palette.primary.light} 100%)`,clipPath:"polygon(50% 100%, 100% 75%, 100% 25%, 50.75% 0%, 50% 19.37%, 82.95% 33.68%, 82.95% 66.48%, 50% 81.23%, 17.05% 66.48%, 17.37% 33.68%, 50% 19.37%, 50.75% 0%, 0% 25%, 0% 75%)"},"&::after":{content:'""',position:"absolute",left:".38rem",top:"2.15rem",width:"3px",height:"0",transition:"height 200ms linear",background:`linear-gradient(180deg, ${e==null?void 0:e.palette.primary.dark} 0%, ${e==null?void 0:e.palette.primary.main} 50%, ${e==null?void 0:e.palette.primary.light} 100%)`},"&.inRange":{"&::after":{height:"100%"}},"&:not(:has(+ .inRange))":{"&::after":{height:"calc(100% - 2.15rem)",clipPath:"polygon(400% -3rem, 100% 50%, 50% 100%, 0% 50%, -400% -3rem)"}}},"& .descriptionBoxWrapper":{position:"relative",outlineOffset:"-1px",overflow:"visible","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,margin:"-.5rem",borderRadius:"4px",backgroundColor:"rgba(30, 41, 59, 0.5)",border:"1px solid rgba(229, 231, 235,.08)",zIndex:-1,opacity:0,transition:"opacity 200ms ease-in"},"&:hover":{"&::before":{opacity:1}}},"&:first-of-type, &:last-of-type":{marginTop:"0",marginBottom:"0"},"@keyframes animateDescription":{from:{opacity:0,scale:.5},to:{opacity:1,scale:1}}})),ce=({data:e={},end:s=!1,index:P,...c})=>{var y,S,k,$,L,z,r,l,w;const h=U(),o=C(h.breakpoints.down("sm")),g=t.useRef(null),p=t.useRef(void 0),{bottom:x,rects:T,top:d,width:H,height:D,viewportWidth:E,viewportHeight:u}=se(p==null?void 0:p.current),{parseText:N}=ne(),[a,b]=t.useState(!1);Number((y=e==null?void 0:e.start)==null?void 0:y.replace(/\D/g,""));const R=Number((S=e==null?void 0:e.end)==null?void 0:S.replace(/\D/g,""));(L=($=(k=e==null?void 0:e.start)==null?void 0:k.replace(/\d/g,""))==null?void 0:$.trim().substring(0,3))==null||L.toUpperCase();const W=(l=(r=(z=e==null?void 0:e.end)==null?void 0:z.replace(/\d/g,""))==null?void 0:r.trim().substring(0,3))==null?void 0:l.toUpperCase();e!=null&&e.isPresent||`${W}${R}`;const m=((e==null?void 0:e.role)+(e!=null&&e.company?` @ ${e==null?void 0:e.company}`:"")).trim(),f=/\n/g.test(e==null?void 0:e.jobDescription)?N(e==null?void 0:e.jobDescription):e==null?void 0:e.jobDescription;return f==null||f.constructor,t.useEffect(()=>{b(x>-10)},[x]),t.useEffect(()=>{const I=u*d/100,B=u-u*x/100;console.log(`${e==null?void 0:e.year}: `,{height:D,top:d,bottom:x,viewportWidth:E,viewportHeight:u,avgheight:u*d/100,pointsTop:I,pointsBottom:B,avg:B-I})},[d]),i.jsx(i.Fragment,{children:i.jsx(le,{...c,my:o?"2rem":"5rem",className:`${a?"inRange":""}${o?" isMobile":""}`,ref:p,children:i.jsxs(G,{container:!0,columnSpacing:0,rowSpacing:0,width:"100%",height:"100%",children:[i.jsx(G,{item:!0,xs:12,sm:2,md:2,lg:2,children:!o&&i.jsxs(v,{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",sx:{width:"100%",height:"100%",position:"relative",pt:"2rem"},children:[i.jsx(_,{variant:"h6",component:"h6",className:"periodLabel",children:e==null?void 0:e.year}),i.jsx("div",{className:"periodLine",style:{top:o?"2rem":"4.75rem",...o&&{transform:"translate(-50% -50%)"}}})]})}),i.jsx(G,{item:!0,xs:12,sm:10,md:10,lg:10,sx:{position:"relative"},children:i.jsxs(v,{component:"div",ref:g,className:"descriptionBoxWrapper",sx:{boxSizing:"border-box",display:"flex",flexDirection:"column",p:o?"1rem 0":"1rem",overflow:"hidden"},children:[!!o&&i.jsxs(v,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",pb:1,columnGap:1,children:[i.jsx(_,{variant:"h5",component:"h5",children:e==null?void 0:e.year}),i.jsx("div",{style:{width:"3rem",height:"1px",background:h.palette.divider}})]}),i.jsx(_,{variant:"h4",color:"text.secondary",className:"timelineDescriptionHeader",mb:1.5,children:m}),i.jsxs(v,{sx:{overflow:"hidden"},children:[i.jsx(v,{sx:{overflow:"hidden",mb:1.5},children:i.jsx(J,{direction:"down",in:a,children:i.jsx(_,{component:"p",variant:"p",color:"text.primary",className:"timelineDescriptionDetails",children:e==null?void 0:e.jobDescription})})}),i.jsxs(v,{className:"techStack",children:[i.jsx(K,{sx:{my:1}}),(w=e==null?void 0:e.technologies)==null?void 0:w.map((I,B)=>i.jsx(oe,{in:a,style:{transitionDelay:a?`${30*B+1}ms`:"0ms"},children:i.jsx(ee,{label:I,sx:{margin:"3px",background:"rgba(45, 212, 191, 0.1)",color:"rgb(94, 234, 212)"}})},B))]})]})]})})]})})})},pe=({})=>{const e=U(),{experiences:s,isLoading:P}=t.useContext(X);t.useState([]);const[c,h]=t.useState(!1);return C(e.breakpoints.down("sm")),C(e.breakpoints.between("sm","md")),C(e.breakpoints.up("lg")),t.useEffect(()=>{h(!0)},[]),i.jsx(Z,{id:"experiences",rowGap:4,children:s==null?void 0:s.map((o,g)=>i.jsx(ce,{end:g>=(s==null?void 0:s.length)-1,index:g,data:o},g))})};pe.propTypes={data:M.array,id:M.string,window:M.func};export{pe as default};
